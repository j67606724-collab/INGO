<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Страховой калькулятор</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 10px; }
        label { display: block; margin-top: 15px; font-weight: bold; }
        input[type=number], select { width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box; }
        .checkbox-group { margin-top: 10px; }
        .checkbox-group label { font-weight: normal; margin-right: 15px; }
        button { margin-top: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
        .result { margin-top: 25px; padding: 15px; background: #f0f0f0; border-radius: 5px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Страховой калькулятор</h1>

    <label for="loanAmount">1) Сумма кредита (руб):</label>
    <input type="number" id="loanAmount" min="0" step="1000" placeholder="Введите сумму кредита" />

    <label for="increasePercent">2) Увеличение суммы кредита (%):</label>
    <input type="number" id="increasePercent" min="0" step="0.01" value="0" />

    <label for="age">3) Возраст заемщика:</label>
    <input type="number" id="age" min="18" max="64" placeholder="Введите возраст (18-64)" />

    <label for="gender">4) Пол заемщика:</label>
    <select id="gender">
        <option value="male">Мужчина</option>
        <option value="female">Женщина</option>
    </select>

    <label>5) Выберите, что страховать:</label>
    <div class="checkbox-group">
        <label><input type="checkbox" id="insureProperty" /> Имущество</label>
        <label><input type="checkbox" id="insureTitle" /> Титул</label>
        <label><input type="checkbox" id="insureLife" /> Жизнь заемщика</label>
    </div>

    <div id="lifeDiscountContainer" style="display:none; margin-top:10px;">
        <label><input type="checkbox" id="lifeDiscount" /> Применить скидку 25% на страхование жизни</label>
    </div>

    <button id="calculateBtn">Рассчитать</button>

    <div class="result" id="result"></div>

    <script>
        // Тарифы по возрасту и полу из вашей таблицы (в процентах, переведены в коэффициенты)
        const lifeTariffsMale = {
            18: 0.00119, 19: 0.00129, 20: 0.00140, 21: 0.00150, 22: 0.00161, 23: 0.00172, 24: 0.00182,
            25: 0.00193, 26: 0.00203, 27: 0.00214, 28: 0.00214, 29: 0.00214, 30: 0.00214, 31: 0.00214,
            32: 0.00214, 33: 0.00227, 34: 0.00240, 35: 0.00252, 36: 0.00265, 37: 0.00278, 38: 0.00324,
            39: 0.00371, 40: 0.00418, 41: 0.00464, 42: 0.00511, 43: 0.00527, 44: 0.00544, 45: 0.00561,
            46: 0.00577, 47: 0.00594, 48: 0.00680, 49: 0.00765, 50: 0.00851, 51: 0.00937, 52: 0.01023, 53: 0.01161, 54: 0.01300,
            55: 0.01439, 56: 0.01578, 57: 0.01717, 58: 0.01856, 59: 0.01995, 60: 0.02134, 61: 0.02273,
            62: 0.02412, 63: 0.02551, 64: 0.02689
        };

        const lifeTariffsFemale = {
            18: 0.00091, 19: 0.00091, 20: 0.00092, 21: 0.00093, 22: 0.00093, 23: 0.00094, 24: 0.00095,
            25: 0.00095, 26: 0.00096, 27: 0.00097, 28: 0.00097, 29: 0.00098, 30: 0.00109, 31: 0.00126,
            32: 0.00142, 33: 0.00152, 34: 0.00162, 35: 0.00173, 36: 0.00183, 37: 0.00193, 38: 0.00206,
            39: 0.00220, 40: 0.00233, 41: 0.00246, 42: 0.00259, 43: 0.00291, 44: 0.00322, 45: 0.00354,
            46: 0.00385, 47: 0.00417, 48: 0.00462, 49: 0.00507, 50: 0.00552, 51: 0.00598, 52: 0.00643,
            53: 0.00721, 54: 0.00799, 55: 0.00876, 56: 0.00954, 57: 0.01032, 58: 0.01110, 59: 0.01188,
            60: 0.01266, 61: 0.01344, 62: 0.01422, 63: 0.01499, 64: 0.01577
        };

        function getTariff(age, gender) {
            const tariffs = gender === 'male' ? lifeTariffsMale : lifeTariffsFemale;
            if (age < 18) return tariffs[18];
            if (age > 64) return tariffs[64];
            return tariffs[age] || tariffs[64];
        }

        document.getElementById('insureLife').addEventListener('change', function() {
            document.getElementById('lifeDiscountContainer').style.display = this.checked ? 'block' : 'none';
            if (!this.checked) {
                document.getElementById('lifeDiscount').checked = false;
            }
        });

        document.getElementById('calculateBtn').addEventListener('click', function() {
            const loanAmount = parseFloat(document.getElementById('loanAmount').value) || 0;
            const increasePercent = parseFloat(document.getElementById('increasePercent').value) || 0;
            const age = parseInt(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const insureProperty = document.getElementById('insureProperty').checked;
            const insureTitle = document.getElementById('insureTitle').checked;
            const insureLife = document.getElementById('insureLife').checked;
            const lifeDiscount = document.getElementById('lifeDiscount').checked;

            if (!loanAmount || loanAmount <= 0) {
                alert('Введите корректную сумму кредита');
                return;
            }
            if (!age || age < 18 || age > 64) {
                alert('Введите возраст от 18 до 64 лет');
                return;
            }

            const increasedLoan = loanAmount * (1 + increasePercent / 100);

                       let resultText = `Сумма кредита с увеличением: ${increasedLoan.toFixed(2)} руб.\n\n`;

            if (insureProperty) {
                // Примерная ставка для имущества (можно заменить на реальные данные)
                const propertyRate = 0.0009; // 0,09%
                const propertySum = increasedLoan * propertyRate;
                resultText += `Страхование имущества: ${propertySum.toFixed(2)} руб.\n`;
            }

            if (insureTitle) {
                // Примерная ставка для титула (можно заменить на реальные данные)
                const titleRate = 0.002; // 0.5%
                const titleSum = increasedLoan * titleRate;
                resultText += `Страхование титула: ${titleSum.toFixed(2)} руб.\n`;
            }

            if (insureLife) {
                const tariff = getTariff(age, gender);
                let lifeSum = increasedLoan * tariff;
                if (lifeDiscount) {
                    lifeSum = lifeSum * 0.75; // скидка 25%
                }
                resultText += `Страхование жизни: ${lifeSum.toFixed(2)} руб.${lifeDiscount ? ' (со скидкой 25%)' : ''}\n`;
            }

            if (!insureProperty && !insureTitle && !insureLife) {
                resultText += 'Выберите хотя бы один вид страхования.';
            }

            document.getElementById('result').textContent = resultText;
        });
    </script>
</body>
</html>
