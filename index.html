<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Страховой калькулятор</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 10px; }
        label { display: block; margin-top: 15px; font-weight: bold; }
        input[type=number], select { width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box; }
        .checkbox-group { margin-top: 10px; }
        .checkbox-group label { font-weight: normal; margin-right: 15px; }
        button { margin-top: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
        .result { margin-top: 25px; padding: 15px; background: #f0f0f0; border-radius: 5px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Страховой калькулятор</h1>

    <label for="loanAmount">1) Сумма кредита (руб):</label>
    <input type="number" id="loanAmount" min="0" step="1000" placeholder="Введите сумму кредита" />

    <label for="increasePercent">2) Увеличение суммы кредита (%):</label>
    <input type="number" id="increasePercent" min="0" step="0.01" value="0" />

    <label>3) Выберите, что страховать:</label>
    <div class="checkbox-group">
        <label><input type="checkbox" id="insureProperty" /> Имущество</label>
        <label><input type="checkbox" id="insureTitle" /> Титул</label>
        <label><input type="checkbox" id="insureLife" /> Жизнь заемщика</label>
    </div>

    <div id="lifeInputs" style="display:none; margin-top: 15px;">
        <label for="gender">Пол:</label>
        <select id="gender">
            <option value="male">Мужской</option>
            <option value="female">Женский</option>
        </select>

        <label for="age">Возраст:</label>
        <input type="number" id="age" min="18" max="100" value="30" />
    </div>
        <button onclick="calculateInsurance()">Рассчитать</button>

    <div class="result" id="result"></div>

    <script>
        // Показать/скрыть поля для жизни в зависимости от выбора
        document.getElementById('insureLife').addEventListener('change', function() {
            document.getElementById('lifeInputs').style.display = this.checked ? 'block' : 'none';
        });

        function calculateInsurance() {
            const loanAmount = parseFloat(document.getElementById('loanAmount').value);
            const increasePercent = parseFloat(document.getElementById('increasePercent').value) || 0;

            if (isNaN(loanAmount) || loanAmount <= 0) {
                alert('Пожалуйста, введите корректную сумму кредита.');
                return;
            }

            // Расчет страховой суммы с учетом увеличения
            const insuranceSum = loanAmount * (1 + increasePercent / 100);

            // Тарифы
            const tariffProperty = 0.0009; // 0.09%
            const tariffTitle = 0.002;     // 0.2%

            // Получаем выбранные риски
            const insureProperty = document.getElementById('insureProperty').checked;
            const insureTitle = document.getElementById('insureTitle').checked;
            const insureLife = document.getElementById('insureLife').checked;

            // Расчет по имуществу
            let propertySum = 0;
            if (insureProperty) {
                propertySum = insuranceSum * tariffProperty;
            }

            // Расчет по титулу
            let titleSum = 0;
            if (insureTitle) {
                titleSum = insuranceSum * tariffTitle;
            }
                        // Расчет по жизни заемщика
            let lifeSum = 0;
            if (insureLife) {
                const gender = document.getElementById('gender').value;
                const age = parseInt(document.getElementById('age').value);

                if (isNaN(age) || age < 18 || age > 100) {
                    alert('Пожалуйста, введите корректный возраст (от 18 до 100).');
                    return;
                }

                // Примерная тарификация жизни по возрасту и полу (коэффициенты)
                // Эти коэффициенты можно заменить на реальные из вашей таблицы
                const lifeTariffsMale = {
                    18: 0.0020, 25: 0.0025, 30: 0.00214, 35: 0.0027, 40: 0.0032, 45: 0.0040, 50: 0.0050, 60: 0.0070
                };
                const lifeTariffsFemale = {
                    18: 0.0018, 25: 0.0020, 30: 0.0019, 35: 0.0023, 40: 0.0027, 45: 0.0035, 50: 0.0040, 60: 0.0055
                };

                // Функция для выбора ближайшего возраста тарифа
                function getNearestAgeTariff(age, tariffs) {
                    const ages = Object.keys(tariffs).map(a => parseInt(a)).sort((a,b) => a-b);
                    for (let i = 0; i < ages.length; i++) {
                        if (age <= ages[i]) return tariffs[ages[i]];
                    }
                    return tariffs[ages[ages.length - 1]];
                }

                const tariffLife = gender === 'male' ?
                    getNearestAgeTariff(age, lifeTariffsMale) :
                    getNearestAgeTariff(age, lifeTariffsFemale);

                lifeSum = insuranceSum * tariffLife;
            }

            // Итоговая сумма
            const totalSum = propertySum + titleSum + lifeSum;

            // Вывод результатов
            let resultText = `Страховая сумма (с учетом увеличения): ${insuranceSum.toFixed(2)} руб.\n\n`;

            if (insureProperty) {
                resultText += `Имущество: ${propertySum.toFixed(2)} руб.\n`;
            }
            if (insureTitle) {
                                resultText += `Титул: ${titleSum.toFixed(2)} руб.\n`;
            }
            if (insureLife) {
                resultText += `Жизнь заемщика: ${lifeSum.toFixed(2)} руб.\n`;
            }

            resultText += `\nИтого страховая премия: ${totalSum.toFixed(2)} руб.`;

            document.getElementById('result').textContent = resultText;
        }
    </script>
</body>
</html>
