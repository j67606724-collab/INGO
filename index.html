<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Калькулятор страховки</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  label { display: block; margin-top: 10px; }
  select, input { width: 200px; padding: 5px; margin-top: 5px; }
  button { margin-top: 15px; padding: 10px 20px; }
  #result { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>

<h2>Калькулятор стоимости страховки</h2>

<form id="calcForm">
  <label>Банк:
    <select id="bank" required>
      <option value="">Выберите банк</option>
      <option value="Sberbank">Сбербанк</option>
      <option value="VTB">ВТБ</option>
    </select>
  </label>

  <label>Категория:
    <select id="category" required>
      <option value="">Выберите категорию</option>
      <option value="Property">Имущество</option>
      <option value="Life">Страхование жизни</option>
    </select>
  </label>

  <label>Пол:
    <select id="gender" required>
      <option value="">Выберите пол</option>
      <option value="Male">Мужчина</option>
      <option value="Female">Женщина</option>
    </select>
  </label>

  <label>Дата рождения:
    <input type="date" id="birthdate" required />
  </label>

  <label>Дата начала страхования:
    <input type="date" id="startdate" required />
  </label>

  <label>Сумма страхования (руб):
    <input type="number" id="amount" required />
  </label>

  <button type="button" onclick="calculate()">Рассчитать</button>
</form>

<div id="result"></div>

<script>
// Пример тарифов. Можно расширить.
const tariffs = [
  // format: банк, категория, пол, возраст от, возраст до, тариф без скидки, тариф со скидкой
  ["Sberbank", "Property", "", 0, 99, 0.09, 0.09],
  ["Sberbank", "Life", "Male", 18, 60, 1.2, 0.9],
  ["Sberbank", "Life", "Female", 18, 60, 1.1, 0.85],
  ["VTB", "Property", "", 0, 99, 0.095, 0.095],
  ["VTB", "Life", "Male", 18, 60, 1.3, 1.0],
  ["VTB", "Life", "Female", 18, 60, 1.2, 0.9],
];

function calculate() {
  const bank = document.getElementById('bank').value;
  const category = document.getElementById('category').value;
  const gender = document.getElementById('gender').value;
  const birthdateStr = document.getElementById('birthdate').value;
  const startdateStr = document.getElementById('startdate').value;
  const amount = parseFloat(document.getElementById('amount').value);

  if (!bank || !category || !gender || !birthdateStr || !startdateStr || !amount) {
    alert('Пожалуйста, заполните все поля');
    return;
  }

  const birthdate = new Date(birthdateStr);
  const startdate = new Date(startdateStr);
  const age = Math.floor((startdate - birthdate) / (365.25 * 24 * 3600 * 1000));

  // ищем тариф
  let tariffBC = null;
  for (const row of tariffs) {
    if (row[0] === bank && row[1] === category) {
      if (category === "Life") {
        if (row[2] !== gender) continue;
      }
      if (age >= row[3] && age <= row[4]) {
        tariffBC = row;
        break;
      }
    }
  }

  if (!tariffBC) {
    document.getElementById('result').innerHTML = 'Тариф не найден для выбранных параметров.';
    return;
  }

  const tariffNoDiscount = tariffBC[5];
  const tariffWithDiscount = tariffBC[6];

  const resultNoDiscount = amount * tariffNoDiscount;
  const resultWithDiscount = amount * tariffWithDiscount;

  document.getElementById('result').innerHTML =
    `<p>Стоимость без скидки: ${resultNoDiscount.toFixed(2)} руб</p>
     <p>Стоимость со скидкой: ${resultWithDiscount.toFixed(2)} руб</p>`;
}
</script>

</body>
</html>
